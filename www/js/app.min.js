!function(){function Config($stateProvider,$urlRouterProvider){function UserResolutionService($q,$state,User,$rootScope){var deferred=$q.defer(),user=new User;return user.$get(function(resp){deferred.resolve(resp),$rootScope.user=user},function(){deferred.reject("You are not logged in"),$state.go("login")}),deferred.promise}$urlRouterProvider.otherwise("/login"),$stateProvider.state("chat",{url:"/",templateUrl:"views/index.html",controller:"chatController",controllerAs:"vm"}).state("login",{url:"/login",controller:"LoginController as login",templateUrl:"views/login/login.html"}).state("signup",{url:"/signup",controller:"SignupController as signup",templateUrl:"views/login/signup.html"}).state("app",{url:"/app","abstract":!0,template:"<ui-view></ui-view>",resolve:{UserResolve:UserResolutionService}}).state("app.secured",{url:"/secured",controller:"DashboardController",templateUrl:"views/test.html"}),UserResolutionService.$inject=["$q","$state","User","$rootScope"]}angular.module("chatbox",["ui.router","ngResource"]).config(Config),Config.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){var config={chatserver:"http://192.168.0.10:8080"};angular.module("chatbox").constant("config",config)}(),function(){function chatController($scope,config){function activate(){socket=io(config.chatserver),socket.on("chat",function(data){vm.messageArray.push({name:data.message,uMsg:!0}),$scope.$apply()}),socket.emit("init","athulnath")}function sendMessage(){vm.messageArray.push({name:vm.message,uMsg:!1}),socket.emit("chat","athulnath",{message:vm.message}),vm.message="",$("#btn-input").focus()}var vm=this;vm.user={data:"adfs"};var socket;vm.message="",vm.messageArray=[{name:"adfafasf",uMsg:!0},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adfafasf",uMsg:!0},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adfafasf",uMsg:!0},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1},{name:"adsfasdf",uMsg:!1}],vm.sendMessage=sendMessage,activate()}angular.module("chatbox").controller("chatController",chatController),chatController.$inject=["$scope","config"]}(),function(){function DashboardController($rootScope){var vm=this;vm.user=$rootScope.user}angular.module("chatbox").controller("DashboardController",DashboardController),DashboardController.$inject=["$rootScope"]}(),function(){function LoginController(LoginAPI,$state){function submit(){var loginObj=new LoginAPI(vm.form);loginObj.$save(_onLoginSuccess,_onLoginFailure)}function _onLoginSuccess(user){$state.go("app.secured")}function _onLoginFailure(data){vm.message="login failed"}var vm=this;vm.form={},vm.message="",vm.submit=submit}angular.module("chatbox").controller("LoginController",LoginController),LoginController.$inject=["LoginAPI","$state"]}(),function(){function MainController($rootScope,$state,$http){function logout(){$http.get("http://192.168.0.10:8080/user/logout").then(function(){delete $rootScope.user,$state.go("login")})}var vm=this;vm.logout=logout}angular.module("chatbox").controller("MainController",MainController),MainController.$inject=["$rootScope","$state","$http"]}(),function(){function SignupController(SignupAPI,$state){function submit(){var signupObj=new SignupAPI(vm.form);signupObj.$save(_onSignupSuccess,_onSignupFailure)}function _onSignupSuccess(user){$state.go("login")}function _onSignupFailure(){console.log("login failed")}var vm=this;vm.form={},vm.submit=submit}angular.module("chatbox").controller("SignupController",SignupController),SignupController.$inject=["SignupAPI","$state"]}(),function(){angular.module("chatbox").directive("focus",function(){return function(scope,element,attributes){console.log("calling"),element[0].focus()}})}(),function(){angular.module("chatbox").directive("scroll",function(){return function(scope,element,attributes){setTimeout(function(){window.scrollTo(0,element[0].offsetTop-100)})}})}(),function(){function LoginAPI($resource){return $resource("http://192.168.0.10:8080/user/login/")}angular.module("chatbox").factory("LoginAPI",LoginAPI),LoginAPI.$inject=["$resource"]}(),function(){function SignupAPI($resource){return $resource("http://192.168.0.10:8080/user/signup/")}angular.module("chatbox").factory("SignupAPI",SignupAPI),SignupAPI.$inject=["$resource"]}(),function(){function User($resource){return $resource("http://192.168.0.10:8080/user/me")}angular.module("chatbox").factory("User",User),User.$inject=["$resource"]}();
//# sourceMappingURL=map/app.min.js.map
